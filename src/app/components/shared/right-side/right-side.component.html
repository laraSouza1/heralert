<!--COMPONETE QUE EXIBE DIVISÃO/SIDEBAR DIREITA DA APP (chat)-->

<div class="h-screen container">

  <!--título-->
  <div class="container-chat">
    <h1 class="mb-3">Chat</h1>
    <div class="line"></div>
  </div>

  <div class="w-12">

    <!--itens users na lista de mensagens-->
    <p-contextmenu #cm [model]="items" (onHide)="selectedUser = null" />

    <!--tabela de users de chats-->
    <p-table #dt2 [value]="users" class="scrollable-table w-full" [ngStyle]="{'max-height': tableHeight}">
      <ng-template #caption>
        <div class="flex">

          <!--pesquisa user-->
          <p-iconfield iconPosition="left" class="ml-auto">
            <p-inputicon>
              <i class="pi pi-search"></i>
            </p-inputicon>
            <input pInputText type="text" (input)="filterUsers($event)" placeholder="Pesquisar usuário" />
          </p-iconfield>
        </div>
      </ng-template>

      <!--infos do user-->
      <ng-template pTemplate="body" let-user let-i="rowIndex">
        <tr (click)="onRowClick(user)" [pContextMenuRow]="user">
          <td>
            <img [src]="user.photo" height="50" width="50" class="user-image" />
          </td>
          <td>
            <div class="truncate" style="color: #3e3e3e;"> {{ user.name }} </div>
            <div class="truncate" style="font-size: 12px;"> {{ user.text }}</div>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <!--ao clicar num dos users da lista acima, abre o chat dele-->
    <div *ngIf="isExpanded">
      <!--header/infos do user-->
      <div class="grid div-chat" style="width: 100%; display: flex; align-items: center;">
        <div class="col"><img *ngIf="expandedUser" [src]="expandedUser.photo" height="50" width="50"
            class="user-image2" /></div>
        <div class="col-7 truncate">
          <div *ngIf="expandedUser" style="color: #FF9D9D; font-weight: 600; font-size: large;"> {{ expandedUser.name }}
          </div>
        </div>
        <div class="col"><i class="pi pi-times" (click)="closeDiv()"></i></div>
      </div>

      <!--chat e inpu-->
      <div>
        <div class="chat">Chat vazio.</div>

        <div>
          <p-iconfield>
            <p-inputicon styleClass="pi pi-plus" />
            <input type="text" pInputText placeholder="Escrever..." class="pesquisa" />
            <p-inputicon styleClass="pi pi-send" />
          </p-iconfield>
        </div>
      </div>

    </div>
  </div>
</div>